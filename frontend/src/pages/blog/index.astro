---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

const posts = (await getCollection('blog')).filter(p => !p.data.draft).sort((a,b) => (a.data.date < b.data.date ? 1 : -1));
---
<BaseLayout title="Blog">
  <main class="max-w-4xl mx-auto">
    <h1 class="text-4xl font-bold mb-6">Blog</h1>
    <ul class="space-y-4">
      {posts.map(({ data, slug }) => (
        <li class="rounded-2xl bg-white/70 backdrop-blur border border-white p-4">
          <a href={`/blog/${slug}/`} class="font-semibold hover:underline">{data.title}</a>
          <div class="text-xs text-zinc-600">{new Date(data.date).toLocaleDateString()}</div>
          {data.description && <p class="text-sm text-zinc-700 mt-1">{data.description}</p>}
        </li>
      ))}
    </ul>
  </main>
</BaseLayout>
