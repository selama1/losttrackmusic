---
const username = import.meta.env.PUBLIC_BUTTONDOWN_USERNAME || "losttrackmusic";
const action = `https://buttondown.email/api/emails/embed-subscribe/${username}`;
const { compact = false } = Astro.props;
---
<form action={action} method="post" class={`rounded-2xl border border-white bg-white/80 backdrop-blur ${compact ? 'p-3' : 'p-5'}`} target="popupwindow" onsubmit="window.open(this.action, 'popupwindow')" >
  <div class={`flex ${compact ? 'flex-col sm:flex-row gap-2' : 'flex-col sm:flex-row gap-3'} items-stretch`}>
    <input type="email" name="email" required placeholder="you@example.com" class="flex-1 rounded-xl border border-black/10 px-3 py-2" aria-label="Email address" />
    <button type="submit" class="rounded-xl px-4 py-2 bg-black text-white hover:opacity-90">
      Join the mailing list
    </button>
  </div>
  <input type="hidden" name="tag" value="site-signup" />
  <p class="text-xs text-zinc-600 mt-2">Powered by Buttondown. Unsubscribe anytime.</p>
</form>
